ئورد الكل ك مجالمشروع من صنفمجال.مشروع؛
ئورد النافدة من نافدة؛
ئورد حدت، عنصرمخصص، مكون، عنصرئشتمل، حدتمخصص؛
ئورد المستند من مستند؛
ئورد مكون.ئيقو؛

ئعلن مشهدمعاينة ():
	يمدد مكون ()؛
	هدا.ئسمصنف = هدا.ئسمصنف + ' موضع-مطلق فوق-8 ط-كامل ع-كامل مت:فوق-0 مت:موضع-نسبي مت:ع-ربع مت:يمين-تلقا مت:ط-تلقا مت:بلوك يمين-كامل بلاعرض'؛
تم

ئعلن مشهدمعاينة.صيير ():
	منطق شاشتكبيرة = النافدة.عرضداخلي > 768؛
	عدد طول؛
	ئدا شاشتكبيرة:
		طول = النافدة.طولداخلي - 60؛
	وئلا:
		طول = النافدة.طولداخلي - 30؛
	تم
	ئرجع (
		<قسم صنف="مخطط-طولي ط-كامل">
			<قسم معرف="ترويمعاينة" صنف="مخطط-عرضي ئرصف-بين ئصفف-وسط خلف-ئسود فوق-0 ط-8 ع-كامل مخفي مت:بلاعرض">
				<ئيقو عندنقر="ئخفيمعاينة" ئسم="سهم-تصفح-يمين" صنف="نصكجج مئشر-سبابة نص-ئبيض حشس-1"></ئيقو>
				<ئيقو عندنقر="نقرعاينمستقل" ئسم="ئفتح-في-نافدة" صنف="نصكجج مئشر-سبابة نص-ئبيض حشس-3"></ئيقو>
			</قسم>
			<ئفريم معرف="ئفريمعاينة" سمة="height:%{طول}px" صنف="ئطار-رمادي-700 خلف-ئبيض ئطارب1 ط-كامل ع-كامل"></ئفريم>
		</قسم>
		<قسم صنف="مخطط-طولي ع-كامل موضع-مطلق تحت-0">
			<قسم صنف="مخطط ئصفف-وسط ئرصف-وسط">
				<قسم عندنقر="ئبدلطرفية" صنف="نص-ئبيض خلف-ئسود حش-1 فمقوس مخطط-عرضي فجوة-2 مئشر-سبابة">
					<ئيقو ئسم="مربع-سلاش"></ئيقو>
					<ئيقو معرف="ئيقوسهم" ئسم="سهم-تصفح-فوق"></ئيقو>
				</قسم>
			</قسم>
			<قسم معرف="قسمطرفية" صنف="حش-1 خلف-ئسود ع-كامل ط-1 فمقوس نصصجج نص-ئبيض فائض-تلقا">
			</قسم>
		</قسم>
	)؛
تم

ئعلن مشهدمعاينة.ئخفيمعاينة ():
	#عنصرئشتمل ئفريم = هدا.ئستعلم('#ئفريمعاينة')؛
	عنصرئشتمل تروي = هدا.ئستعلم("#ترويمعاينة")؛
	هدا.ئسمصنف = هدا.ئسمصنف.عووض("فوق-8"، "فوق-0")؛
	هدا.ئسمصنف = هدا.ئسمصنف + ' بلاعرض'؛
	تروي.ئسمصنف = تروي.ئسمصنف + ' مخفي'؛
تم

ئعلن مشهدمعاينة.ئبدلطرفية ():
	عنصرئشتمل طرفي = هدا.ئستعلم('#قسمطرفية')؛
	ئيقو ئيقوسهم = هدا.ئستعلم('#ئيقوسهم')؛
	ئدا طرفي.ئسمصنف.يتضمن('ط-تلاتمئة'):
		#نريد التصغير
		طرفي.ئسمصنف = طرفي.ئسمصنف.عووض('ط-تلاتمئة'، 'ط-1')؛
		ئيقوسهم.خدئسم('سهم-تصفح-فوق')؛
	وئلا:
		#نريد التكبير
		طرفي.ئسمصنف = طرفي.ئسمصنف.عووض('ط-1'، 'ط-تلاتمئة')؛
		ئيقوسهم.خدئسم('سهم-تصفح-تحت')؛
	تم
تم

ئعلن مشهدمعاينة.ئفتحطرفية ():
	عنصرئشتمل طرفي = هدا.ئستعلم('#قسمطرفية')؛
	ئيقو ئيقوسهم = هدا.ئستعلم('#ئيقوسهم')؛
	ئدا ليس طرفي.ئسمصنف.يتضمن('ط-تلاتمئة'):
		طرفي.ئسمصنف = طرفي.ئسمصنف.عووض('ط-1'، 'ط-تلاتمئة')؛
		ئيقوسهم.خدئسم('سهم-تصفح-تحت')؛
	تم
تم

ئعلن مشهدمعاينة.ئكتبسطر (نصية سطر):
	عنصرئشتمل طرفي = هدا.ئستعلم('#قسمطرفية')؛
	طرفي.ئشتملداخلي = طرفي.ئشتملداخلي + (
		<حيز صنف="ئرتف-سطر-4 بلوك حش-1 مئشر-سبابة تئشير:خلف-رمادي-800">%{سطر}</حيز>
	)؛
تم

ئعلن مشهدمعاينة.ئمسح ():
	عنصرئشتمل طرفي = هدا.ئستعلم('#قسمطرفية')؛
	طرفي.ئشتملداخلي = ''؛
تم

ئعلن مشهدمعاينة.نقرعاينمستقل ():
	النافدة.ئفتح("/ئختبر/%{مجالمشروع.مشروعحالي.ئسمشروع}"، 'جديد')؛
	هدا.ئخفيمعاينة()؛
تم

ئعلن مشهدمعاينة.شغغلتحميل ():
	منوع ئفريم = هدا.ئستعلم('#ئفريمعاينة')؛
	ئفريم['src'] = "/ئختبر/تحميل"؛
تم

ئعلن مشهدمعاينة.شغغلرابط (نصية رابط):
	منوع ئفريم = هدا.ئستعلم('#ئفريمعاينة')؛
	ئفريم['src'] = رابط؛
تم

ئعلن مدخل ():
	عنصرمخصص.سججل('مشهدمعاينة'، مشهدمعاينة)؛
تم